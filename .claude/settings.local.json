{
  "permissions": {
    "allow": [
      "Bash(nul)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "Bash(ssh root@134.122.4.164 \"curl -s -X POST -H ''Content-Type: application/json'' -H ''X-Dilithion-RPC: 1'' -d ''{\"\"jsonrpc\"\":\"\"2.0\"\",\"\"id\"\":1,\"\"method\"\":\"\"getblockcount\"\",\"\"params\"\":[]}'' http://127.0.0.1:18332/\")",
      "Bash(ssh root@134.122.4.164 \"curl -s -X POST -H ''Content-Type: application/json'' -H ''X-Dilithion-RPC: 1'' -d ''{\"\"jsonrpc\"\":\"\"2.0\"\",\"\"id\"\":1,\"\"method\"\":\"\"getmininginfo\"\",\"\"params\"\":[]}'' http://127.0.0.1:18332/\")",
      "Bash(ssh root@134.122.4.164 \"ps aux | grep dilithion-node | grep -v grep\")",
      "Bash(for node in 134.122.4.164 188.166.255.63 209.97.177.197)",
      "Bash(do echo \"=== Checking $node ===\")",
      "Bash(ssh root@$node \"ps aux | grep ''[d]ilithion-node'' || echo ''Node not running''\")",
      "Bash(done)",
      "Bash(ssh root@188.166.255.63 \"curl -s -X POST -H ''Content-Type: application/json'' -H ''X-Dilithion-RPC: 1'' -d ''{\"\"jsonrpc\"\":\"\"2.0\"\",\"\"id\"\":1,\"\"method\"\":\"\"getblockcount\"\",\"\"params\"\":[]}'' http://127.0.0.1:18332/\")",
      "Bash(ssh root@209.97.177.197 \"curl -s -X POST -H ''Content-Type: application/json'' -H ''X-Dilithion-RPC: 1'' -d ''{\"\"jsonrpc\"\":\"\"2.0\"\",\"\"id\"\":1,\"\"method\"\":\"\"getblockcount\"\",\"\"params\"\":[]}'' http://127.0.0.1:18332/\")",
      "Bash(ssh root@188.166.255.63 \"curl -s -X POST -H ''Content-Type: application/json'' -H ''X-Dilithion-RPC: 1'' -d ''{\"\"jsonrpc\"\":\"\"2.0\"\",\"\"id\"\":1,\"\"method\"\":\"\"getmininginfo\"\",\"\"params\"\":[]}'' http://127.0.0.1:18332/\")",
      "Bash(ssh root@134.122.4.164 \"cd /root/dilithion && git fetch && git checkout fix/genesis-transaction-serialization && git pull && make clean && make dilithion-node\")",
      "Bash(ssh root@188.166.255.63 \"curl -s -X POST -H ''Content-Type: application/json'' -H ''X-Dilithion-RPC: 1'' -d ''{\"\"jsonrpc\"\":\"\"2.0\"\",\"\"id\"\":1,\"\"method\"\":\"\"getblockhash\"\",\"\"params\"\":[0]}'' http://127.0.0.1:18332/\")",
      "Bash(ssh root@209.97.177.197 \"curl -s -X POST -H ''Content-Type: application/json'' -H ''X-Dilithion-RPC: 1'' -d ''{\"\"jsonrpc\"\":\"\"2.0\"\",\"\"id\"\":1,\"\"method\"\":\"\"getblockhash\"\",\"\"params\"\":[0]}'' http://127.0.0.1:18332/\")",
      "Bash(ssh root@188.166.255.63 \"curl -s -X POST -H ''Content-Type: application/json'' -H ''X-Dilithion-RPC: 1'' -d ''{\"\"jsonrpc\"\":\"\"2.0\"\",\"\"id\"\":1,\"\"method\"\":\"\"getbestblockhash\"\",\"\"params\"\":[]}'' http://127.0.0.1:18332/\")",
      "Bash(ssh:*)",
      "Bash(git log:*)",
      "Bash(make genesis_gen:*)",
      "Bash(do echo \"=== $node ===\")",
      "Bash(do echo \"=== Node: $node ===\")",
      "Bash(for node in 188.166.255.63 209.97.177.197)",
      "Bash(make dilithion-node:*)",
      "Bash(for:*)",
      "Bash(do echo \"=== Check $i ===\")",
      "Bash(curl:*)",
      "Bash(/tmp/nyc-build.log)",
      "Bash(/tmp/singapore-build.log)",
      "Bash(/tmp/london-build.log)",
      "Bash(do echo '=== Node: $node ===')",
      "WebFetch(domain:bitcoin.org)",
      "WebFetch(domain:ethereum.org)",
      "WebFetch(domain:github.com)",
      "WebSearch",
      "WebFetch(domain:developer.bitcoin.org)",
      "WebFetch(domain:geth.ethereum.org)",
      "Bash(do echo -n '$node: ')",
      "Bash(cat:*)",
      "Bash(make:*)",
      "Bash(mingw32-make:*)",
      "Bash(g++:*)",
      "Bash(/tmp/nyc-ibd-build.log)",
      "Bash(/tmp/singapore-ibd-build.log)",
      "Bash(/tmp/london-ibd-build.log)",
      "Bash(/tmp/nyc-ibd-build2.log)",
      "Bash(/tmp/singapore-ibd-build2.log)",
      "Bash(/tmp/london-ibd-build2.log)",
      "Bash(test:*)",
      "Bash(/tmp/nyc-final-build.log)",
      "Bash(/tmp/singapore-final-build.log)",
      "Bash(/tmp/london-final-build.log)",
      "WebFetch(domain:dilithion.org)",
      "Bash(do echo \"=== $node RPC ===\")",
      "Bash(do echo \"=== Disabling $node ===\")",
      "Bash(do echo \"=== Killing $node ===\")",
      "Bash(do echo \"=== Verifying $node config ===\")",
      "Bash(do echo \"=== Wiping $node blockchain data ===\")",
      "Bash(do)",
      "Bash(echo:*)",
      "Bash(do echo \"\")",
      "Bash(git checkout:*)",
      "Bash(git cherry-pick:*)",
      "Bash(do echo \"=== Cleaning $node ===\")",
      "Bash(do echo \"=== Deploying to $node ===\")",
      "Bash(__NEW_LINE__ ssh root@$node \"\n  systemctl stop dilithion-testnet\n  killall -9 dilithion-node 2>/dev/null || true\n  sleep 5\n  \n  cd /root/dilithion\n  git pull\n  \n  cp systemd/dilithion-testnet-fixed.service /etc/systemd/system/dilithion-testnet.service\n  systemctl daemon-reload\n  systemctl reset-failed dilithion-testnet\n  systemctl start dilithion-testnet\n  \n  sleep 10\n  \n  echo ''--- SERVICE STATUS ---''\n  systemctl status dilithion-testnet --no-pager | head -15\n  \")",
      "Bash(__NEW_LINE__ echo \"\")",
      "Bash(tee:*)",
      "Bash(do echo \"=== Node $node ===\")",
      "Bash(git pull:*)",
      "Bash(pacman:*)",
      "Bash(git merge:*)",
      "Bash(git tag:*)",
      "Bash(gh run list:*)",
      "Bash(gh run view:*)",
      "Bash(gh run watch:*)",
      "Bash(gh workflow run:*)",
      "Bash(gh run download:*)",
      "Bash(./mingw32-make:*)",
      "Bash(export VERSION=v1.0.10)",
      "Bash(cmd.exe /c \"package-windows-release.bat\")",
      "Bash(VERSION=v1.0.10 bash:*)",
      "Bash(powershell.exe:*)",
      "Bash(./dilithion-node.exe:*)",
      "Bash(sha256sum:*)",
      "Bash(dilithion-testnet-v1.0.10-SHA256SUMS.txt)",
      "Bash(scp:*)",
      "Bash(gh release view:*)",
      "Bash(gh release create:*)",
      "Bash(dilithion-testnet-v1.0.10-linux-x64.tar.gz )",
      "Bash(dilithion-testnet-v1.0.10-macos-x64.tar.gz )",
      "Bash(dilithion-testnet-v1.0.10-windows-x64.zip )",
      "Bash(do echo \"=== Node: $node ===\" ssh root@$node \"curl -s -X POST -H ''''Content-Type: application/json'''' -H ''''X-Dilithion-RPC: 1'''' -d ''''{\"\"jsonrpc\"\":\"\"2.0\"\",\"\"id\"\":1,\"\"method\"\":\"\"getblockcount\"\",\"\"params\"\":[]}'''' http://127.0.0.1:18332/\")",
      "Bash(timeout 15 cmd.exe:*)",
      "Bash(VERSION=v1.0.11 bash:*)",
      "Bash(gh workflow:*)",
      "Bash(dilithion-testnet-v1.0.11-SHA256SUMS.txt)",
      "Bash(bash -c \"cmd.exe /c ''package-windows-release.bat 2>&1''\")",
      "Bash(timeout 20 cmd.exe:*)",
      "Bash(gh repo view:*)",
      "Bash(gh issue list:*)",
      "Bash(gh pr list:*)",
      "Bash(timeout 30 ./dilithion-node:*)",
      "Bash(tasklist:*)",
      "Bash(VERSION=v1.0.12 bash:*)",
      "Bash(cmd.exe /c \"set VERSION=v1.0.12 && package-windows-release.bat\")",
      "Bash(timeout 25 cmd.exe:*)",
      "Bash(cmd.exe /c 'start /B test-mine.bat')",
      "Bash(taskkill:*)",
      "Bash(md5sum:*)",
      "Bash(cmd.exe /c:*)",
      "Bash(timeout 30 cmd.exe:*)",
      "Bash(timeout 25 dilithion-node.exe:*)",
      "Bash(./genesis_gen.exe:*)",
      "Bash(./package-windows-release.bat)",
      "Bash(dilithion-testnet-v1.0.13-SHA256SUMS.txt)",
      "Bash(timeout 120 cmd.exe:*)",
      "Bash(dir:*)",
      "Bash(do echo \"=== Node: $node Genesis ===\")",
      "Bash(timeout 30 ./dilithion-node.exe:*)",
      "Bash(ldd:*)",
      "Bash(cp:*)",
      "Bash(export VERSION=v1.0.14)",
      "Bash(bash package-windows-release.bat)",
      "Bash(dilithion-testnet-v1.0.14-SHA256SUMS.txt)",
      "Bash(gh auth status:*)",
      "Bash(gh api:*)",
      "Bash(do echo \"=== Node: $node Block Count ===\" ssh root@$node \"curl -s -X POST -H ''''Content-Type: application/json'''' -H ''''X-Dilithion-RPC: 1'''' -d ''''{\"\"jsonrpc\"\":\"\"2.0\"\",\"\"id\"\":1,\"\"method\"\":\"\"getblockcount\"\",\"\"params\"\":[]}'''' http://127.0.0.1:18332/\")",
      "Bash(do echo \"=== Node: $node Block 8 ===\")",
      "Bash(do echo \"=== Node: $node Network Hash Rate ===\")",
      "Bash(timeout 60 cmd.exe:*)",
      "Bash(powershell -command \"Compress-Archive -Path ''*'' -DestinationPath ''../dilithion-testnet-v1.0.14-windows-x64-clean.zip'' -Force\")",
      "Bash(unzip:*)",
      "Bash(timeout 20 ./dilithion-node.exe:*)",
      "Bash(timeout 45 ./dilithion-node.exe:*)",
      "Bash(timeout 15 dilithion-node.exe:*)",
      "Bash(timeout 20 dilithion-node.exe:*)",
      "Bash(rd /s /q \"C:\\Users\\will\\.dilithion-testnet\")",
      "Bash(timeout 120 ./dilithion-node.exe:*)",
      "Bash(timeout 15 ./dilithion-node.exe:*)",
      "Bash(timeout 35 ./dilithion-node.exe:*)",
      "Bash(do echo \"=== Deploying to $node ===\" ssh root@$node \"\n    cd /root/dilithion\n    \n    # Pull latest code\n    git fetch origin\n    git checkout main\n    git pull origin main\n    \n    # Stop node and wipe blockchain data (serialization format changed)\n    systemctl stop dilithion-testnet 2>/dev/null || true\n    killall -9 dilithion-node 2>/dev/null || true\n    rm -rf /root/.dilithion-testnet/blocks\n    rm -rf /root/.dilithion-testnet/chainstate\n    \n    # Rebuild\n    make clean && make dilithion-node\n    \n    # Restart\n    systemctl start dilithion-testnet\n    sleep 5\n    \n    # Check status\n    echo ''''--- Service Status ---''''\n    systemctl status dilithion-testnet --no-pager | head -10\n  \")",
      "Bash(powershell -command:*)",
      "Bash(timeout 60 ./dilithion-node.exe:*)",
      "Bash(do echo \"=== Fixing $node ===\")",
      "Bash(do if [ \"$node\" = \"Local\" ])",
      "Bash(fi)",
      "Bash(findstr:*)",
      "Bash(do echo \"=== Node $node ===\" ssh root@$node \"ps aux | grep ''[d]ilithion-node'' | head -1 || echo ''NOT RUNNING''\")",
      "Bash(timeout 90:*)",
      "Bash(ibd-with-live-seeds.log)",
      "Bash(do echo \"=== Node: $node ===\" ssh root@$node \"curl -s -X POST -H ''Content-Type: application/json'' -H ''X-Dilithion-RPC: 1'' -d ''{\"\"jsonrpc\"\":\"\"2.0\"\",\"\"id\"\":1,\"\"method\"\":\"\"getblockcount\"\",\"\"params\"\":[]}'' http://127.0.0.1:18332/\")",
      "Bash(timeout 300 ./dilithion-node.exe:*)",
      "Bash(pkill:*)",
      "Bash(export VERSION=v1.0.15)",
      "Bash(dilithion-testnet-v1.0.15-SHA256SUMS.txt)",
      "Bash(releases/dilithion-testnet-v1.0.15-windows-x64.zip )",
      "Bash(releases/dilithion-testnet-v1.0.15-linux-x64.tar.gz )",
      "Bash(releases/dilithion-testnet-v1.0.15-macos-x64.tar.gz )",
      "Bash(releases/dilithion-testnet-v1.0.15-SHA256SUMS.txt)",
      "Bash(timeout 5 ./dilithion-node.exe:*)",
      "Bash(timeout 3 ./dilithion-node.exe:*)",
      "Bash(gh release delete-asset:*)",
      "Bash(gh release upload:*)",
      "Bash(timeout 180 ./dilithion-node.exe:*)",
      "Bash(then echo -n \"$node: \")",
      "Bash(else echo -n \"$node: \")",
      "Bash(gh issue view:*)",
      "Bash(rm:*)",
      "Bash(do echo \"=== Restarting $node ===\" ssh root@$node \"systemctl start dilithion-testnet && sleep 5 && echo ''Service started'' && systemctl status dilithion-testnet --no-pager | head -10\")",
      "Bash(do echo \"=== Node: $node ===\" ssh root@$node \"curl -s -X POST -H ''Content-Type: application/json'' -H ''X-Dilithion-RPC: 1'' -d ''{\"\"jsonrpc\"\":\"\"2.0\"\",\"\"id\"\":1,\"\"method\"\":\"\"getblockcount\"\",\"\"params\"\":[]}'' http://127.0.0.1:18332/ && curl -s -X POST -H ''Content-Type: application/json'' -H ''X-Dilithion-RPC: 1'' -d ''{\"\"jsonrpc\"\":\"\"2.0\"\",\"\"id\"\":1,\"\"method\"\":\"\"getmininginfo\"\",\"\"params\"\":[]}'' http://127.0.0.1:18332/\")",
      "Bash(do echo \"=== Node $node ===\" ssh root@$node \"ps aux | grep ''[d]ilithion-node'' || echo ''Not running''\")",
      "Bash(git fetch:*)"
    ],
    "deny": [],
    "ask": []
  }
}
